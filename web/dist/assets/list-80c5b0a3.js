/* empty css                        */import{b as C,j as I,k as U,l as B}from"./api-5c6fbd67.js";import{d as G,u as D,r as i,o as K,c as O,b as w,a,l as s,i as h,M as n,B as $,G as F,S as j,J,E as P,Y as R,a0 as Y,U as q}from"./index-d6e7f6d7.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const L={class:"boxw"},Q={class:"box-n"},W={class:"compon"},X={class:"table"},Z=G({__name:"list",setup(ee){const o=D(),d=i(!1),M=i([]),c=i(!1),x=i(0),_=i(!1),r=async()=>{let e=await C({});e.status==200?M.value=e.data:e.status==204?(n.warning("登录失效 请重新登录"),localStorage.removeItem("SEM07_MANAGE_TOKEN"),o.push("/Manage/login")):e.status==299&&o.push("/Manage/299")};r();const m=i({cl_name:""}),E=async()=>{let e=await I(m.value);e.status==200?(n.success("新建成功"),c.value=!1,r()):e.status==204?(n.warning("登录失效 请重新登录"),localStorage.removeItem("SEM07_MANAGE_TOKEN"),o.push("/Manage/login")):e.status==299?o.push("/Manage/299"):(n.warning(e.message),c.value=!1)},V=e=>{d.value=!0,x.value=e},N=()=>{d.value=!1},S=async()=>{let e=await U({id:x.value});e.status==200?(n.success("删除成功"),d.value=!1,r()):e.status==204?(n.warning("登录失效 请重新登录"),localStorage.removeItem("SEM07_MANAGE_TOKEN"),o.push("/Manage/login")):e.status==299?o.push("/Manage/299"):(n.warning(e.message),d.value=!1)},u=i({}),T=async()=>{let e=await B(u.value);e.status==200?(n.success("编辑成功"),_.value=!1,r()):e.status==204?(n.warning("登录失效 请重新登录"),localStorage.removeItem("SEM07_MANAGE_TOKEN"),o.push("/Manage/login")):e.status==299?o.push("/Manage/299"):(n.warning(e.message),_.value=!1)};return(e,t)=>{const b=$,p=F,k=j,z=J,v=P,f=R,y=Y,g=q;return K(),O("div",L,[w("div",Q,[w("div",W,[a(b,{onClick:t[0]||(t[0]=l=>c.value=!0)},{default:s(()=>[h("新增分类")]),_:1})]),w("div",X,[a(z,{data:M.value,style:{width:"100%",height:"100%"}},{default:s(()=>[a(p,{width:"100",align:"center",label:"id",prop:"id"}),a(p,{width:"150",align:"center",label:"分类名称",prop:"cl_name"}),a(p,{width:"150",align:"center",label:"分类权重",prop:"cl_zindex"}),a(p,{label:"操作",align:"center",fixed:"right",width:"220"},{default:s(l=>[a(k,{size:"5px"},{default:s(()=>[a(b,{theme:"primary",size:"small",onClick:A=>(u.value=l.row,_.value=!0)},{default:s(()=>[h("编辑")]),_:2},1032,["onClick"]),a(b,{theme:"danger",size:"small",onClick:A=>V(l.row.id)},{default:s(()=>[h("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),a(g,{visible:c.value,"onUpdate:visible":t[3]||(t[3]=l=>c.value=l),attach:"body",header:"新增分类","destroy-on-close":"","on-confirm":E},{body:s(()=>[a(y,{class:"newbox"},{default:s(()=>[a(f,{label:"分类名称",name:"name","initial-data":"TDesign"},{default:s(()=>[a(v,{placeholder:"请输入内容",modelValue:m.value.cl_name,"onUpdate:modelValue":t[1]||(t[1]=l=>m.value.cl_name=l)},null,8,["modelValue"])]),_:1}),a(f,{label:"分类权重",name:"tel","initial-data":"123456"},{default:s(()=>[a(v,{placeholder:"数字越大，越靠前",modelValue:m.value.cl_zindex,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value.cl_zindex=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible"]),a(g,{visible:_.value,"onUpdate:visible":t[6]||(t[6]=l=>_.value=l),attach:"body",header:"编辑分类","destroy-on-close":"","on-confirm":T},{body:s(()=>[a(y,{class:"newbox"},{default:s(()=>[a(f,{label:"分类名称",name:"name","initial-data":"TDesign"},{default:s(()=>[a(v,{placeholder:"请输入内容",modelValue:u.value.cl_name,"onUpdate:modelValue":t[4]||(t[4]=l=>u.value.cl_name=l)},null,8,["modelValue"])]),_:1}),a(f,{label:"分类权重",name:"tel","initial-data":"123456"},{default:s(()=>[a(v,{placeholder:"数字越大，越靠前",modelValue:u.value.cl_zindex,"onUpdate:modelValue":t[5]||(t[5]=l=>u.value.cl_zindex=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible"]),a(g,{visible:d.value,header:"警告",body:"此操作将永久删除本条数据 且不可找回","confirm-btn":{content:"确定删除",variant:"base"},"cancel-btn":{content:"我点错了",variant:"outline"},"on-close":N,"on-confirm":S},null,8,["visible"])])])}}});const ne=H(Z,[["__scopeId","data-v-5dbc3d67"]]);export{ne as default};
